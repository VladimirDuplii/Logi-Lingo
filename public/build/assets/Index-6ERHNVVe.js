import{r as a,j as e,H as g}from"./app-CB6H9fcf.js";import{C as n,D as p}from"./DuoLayout-1S1Fd3QP.js";import{R as j}from"./RightCourseSidebar-QTU9qcSS.js";import{H as S,C as v}from"./CourseCard-Bgn6y8EQ.js";import"./card-Cn0cBMnd.js";import"./button-2bCJMJSP.js";import{C as y}from"./Skeleton-C7VVEt2j.js";import"./Toast-BdGrl3Cx.js";const N=({onCourseSelect:s})=>{const[o,i]=a.useState([]),[u,m]=a.useState(!0),[c,x]=a.useState(null),[h,d]=a.useState(new Set);return a.useEffect(()=>{(async()=>{try{const[t,l]=await Promise.all([n.getCourses(),n.getStartedCourses().catch(()=>null)]);if(i(t?.data?.courses||[]),l){const f=Array.isArray(l?.data?.courses)?l.data.courses:[];d(new Set(f.map(C=>C.id)))}else d(new Set)}catch(t){x("Failed to load courses. Please try again later."),console.error("Error fetching courses:",t)}finally{m(!1)}})()},[]),u?e.jsx("div",{className:"grid grid-cols-1 gap-5","aria-label":"Завантаження курсів","aria-busy":"true",children:[...Array(6)].map((r,t)=>e.jsx(y,{},t))}):c?e.jsx("div",{className:"text-sm text-red-600",children:c}):o.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"No courses available at this time."}):e.jsxs("div",{className:"course-list",children:[e.jsx("div",{className:"mb-6",children:e.jsx(S,{level:2,kicker:"Навчання",children:"Курси"})}),e.jsx("div",{className:"grid grid-cols-1 gap-5",children:o.map(r=>e.jsx(v,{course:r,isStarted:h.has(r.id),onClick:()=>s(r)},r.id))})]})},P=({auth:s})=>{const o=i=>{window.location.href=`/courses/${i.id}`};return e.jsxs(p,{right:e.jsx(j,{course:null,hearts:s?.user?.hearts??void 0,points:s?.user?.points??s?.user?.xp??void 0,otherCourses:s?.user?.courses||[]}),centerMaxClass:"xl:max-w-2xl",children:[e.jsx(g,{title:"Courses"}),e.jsxs("div",{id:"courses-page",className:"w-full",children:[e.jsx("div",{id:"courses-header",className:"mb-4 flex items-center justify-between",children:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Courses"})}),e.jsx(N,{onCourseSelect:o})]})]})};export{P as default};
